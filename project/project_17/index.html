<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Source Themes Academic"><meta name=description content><link rel=alternate hreflang=en-us href=https://www.brainhack.org/global2023/project/project_17/><meta name=theme-color content="#66a49f"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css crossorigin=anonymous title=hl-light><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/dracula.min.css crossorigin=anonymous title=hl-dark disabled><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin=anonymous async></script><link rel=stylesheet href=/global2023/css/academic.css><link rel=manifest href=/global2023/index.webmanifest><link rel=icon type=image/png href=/global2023/images/icon_hu405768a2e56dba1817ce36477148a60d_2978_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=/global2023/images/icon_hu405768a2e56dba1817ce36477148a60d_2978_192x192_fill_lanczos_center_2.png><link rel=canonical href=https://www.brainhack.org/global2023/project/project_17/><meta property="twitter:card" content="summary"><meta property="twitter:site" content="@brainhackorg"><meta property="twitter:creator" content="@brainhackorg"><meta property="og:site_name" content="Brainhack Global 2023"><meta property="og:url" content="https://www.brainhack.org/global2023/project/project_17/"><meta property="og:title" content="Large Scale FPGA Neuromorphic Interface precursor work. A GPU implementation of Allen Brain V1 measured model using Julia and or PyGeNN | Brainhack Global 2023"><meta property="og:description" content><meta property="og:image" content="https://www.brainhack.org/global2023/images/icon_hu405768a2e56dba1817ce36477148a60d_2978_512x512_fill_lanczos_center_2.png"><meta property="twitter:image" content="https://www.brainhack.org/global2023/images/icon_hu405768a2e56dba1817ce36477148a60d_2978_512x512_fill_lanczos_center_2.png"><meta property="og:locale" content="en-us"><meta property="article:modified_time" content="2023-03-21T09:02:23+01:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.brainhack.org/global2023/project/project_17/"},"headline":"Large Scale FPGA Neuromorphic Interface precursor work. A GPU implementation of Allen Brain V1 measured model using Julia and or PyGeNN","datePublished":"0001-01-01T00:00:00Z","dateModified":"2023-03-21T09:02:23+01:00","author":{"@type":"Person","name":"Authors"},"publisher":{"@type":"Organization","name":"Brainhack Global 2023","logo":{"@type":"ImageObject","url":"https://www.brainhack.org/global2023/images/icon_hu405768a2e56dba1817ce36477148a60d_2978_192x192_fill_lanczos_center_2.png"}},"description":""}</script><title>Large Scale FPGA Neuromorphic Interface precursor work. A GPU implementation of Allen Brain V1 measured model using Julia and or PyGeNN | Brainhack Global 2023</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents><script>const isSiteThemeDark=false;</script><script src=/global2023/js/load-theme.js></script><aside class=search-results id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/global2023/>Brainhack Global 2023</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/global2023/>Brainhack Global 2023</a></div><div class="navbar-collapse main-menu-item collapse justify-content-center" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/global2023/><i class="fas fa-brain"></i><span>&nbsp; Home</span></a></li><li class=nav-item><a class=nav-link href=/global2023/events/><i class="fas fa-search-location"></i><span>&nbsp; Events</span></a></li><li class=nav-item><a class=nav-link href=/global2023/projects/><i class="fas fa-laptop"></i><span>&nbsp; Projects</span></a></li><li class=nav-item><a class=nav-link href=/global2023/gallery><i class="fas fa-brush"></i><span>&nbsp; Gallery</span></a></li><li class=nav-item><a class=nav-link href=/global2023/faq/><i class="fas fa-question"></i><span>&nbsp; FAQ</span></a></li><li class=nav-item><a class=nav-link href=https://brainhack.org/code-of-conduct target=_blank rel=noopener><span>Code of Conduct</span></a></li><li class=nav-item><a class=nav-link href=/global2023/#team><span>Team</span></a></li><li class=nav-item><a class=nav-link href=/global2023/#contact><span>Contact</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"></ul></div></nav><div class=pub><div class="article-container pt-3"><h1>Large Scale FPGA Neuromorphic Interface precursor work. A GPU implementation of Allen Brain V1 measured model using Julia and or PyGeNN</h1><div class=article-metadata><span class=article-date>Last updated on
Mar 21, 2023</span></div></div><div class=article-container><h3 id=title>Title</h3><p>GPU implementation of Allen Brain V1 measured model using Julia and or PyGeNN: A precursor to a large scale FPGA based very large scale spiking neuronal network.</p><h3 id=leaders>Leaders</h3><p>@russelljjarvis</p><h3 id=collaborators>Collaborators</h3><p><em>No response</em></p><h3 id=brainhack-global-2022-event>Brainhack Global 2022 Event</h3><p>Brainhack Australasia</p><h3 id=project-description>Project Description</h3><ul><li>Providing a ground truth for an FPGA based large scale simulation.</li><li>Making Julia+GPU potentially a more Democratic programming paradigm.</li><li>A lot of simulated biological network development time is time spent debugging and developing models.</li><li>For large-scale spike trains the performance of plotting code becomes an important issue too, given that plotting may happen many times during model development.</li><li>Debugging execution runs should be factored into the total execution time of a mode, ie the debugging and execution loop should be profiled too. In the past, there may have been a tendency to overlook model construction delays that are caused by human errors.</li><li>From a green computing and environmental computing perspective, the total time from model conception to final model deployment is interesting.</li></ul><h3 id=how-to-get-started>How to get started?</h3><p>code entry point is <code>bash workflow.sh</code>
But it assumes you first followed the install intructions in the <a href=https://github.com/SpikingNetwork/TrainSpikingNet.jl>README.md here</a>
<a href=https://github.com/JuliaWSU/TrainSpikingNet.jl/blob/master/workflow.sh>https://github.com/JuliaWSU/TrainSpikingNet.jl/blob/master/workflow.sh</a></p><h4 id=link-to-project-repositorysources>Link to project repository/sources</h4><p>Through pers-comm I have established that the author of the original repository may be open to PRs.</p><p><a href=https://github.com/SpikingNetwork/TrainSpikingNet.jl>https://github.com/SpikingNetwork/TrainSpikingNet.jl</a></p><p>However there exist some more experimental forks for intermediate hacking. Another fork of TrainSpikingNet is <a href=https://github.com/JuliaWSU/TrainSpikingNet.jl>here</a></p><p>A lot of the implied work is in wrangling the Pandas data frame and Sonata HDF5 connectomes into Julia-compatible HDF5 and or compressed arrays saved as JLD2.</p><p>The code for getting Python connectomes is [here]
(<a href=https://github.com/williamsnider/v1_project/blob/main/build_model.py>https://github.com/williamsnider/v1_project/blob/main/build_model.py</a>)</p><h3 id=goals-for-brain-hack-global>Goals for Brain Hack Global</h3><p>Applying SNNs dynamic simulations to pre-existing connectome data.</p><p>Reproducing pre-existing computational research but using different more Democratic tools.</p><h3 id=good-first-issues>Good First Issues:</h3><h1 id=1>1.</h1><p>Use PCA and UMAP on the output raster plot spike trains in Julia and or Python in order to understand and compare the output of the simulation [Done, or done for a trivially small spike time raster plot].</p><p>Possibly the easiest immediate thing someone could get working:
Apply sequence detection to the spike trains too via PPSeq.jl
<a href=https://github.com/lindermanlab/PPSeq.jl>https://github.com/lindermanlab/PPSeq.jl</a>
<a href=https://github.com/JuliaWSU/TrainSpikingNet.jl/blob/master/src/plot.jl#L72>https://github.com/JuliaWSU/TrainSpikingNet.jl/blob/master/src/plot.jl#L72</a>
Apply PPSeq.jl to the spike train array: nss</p><h1 id=2>2.</h1><p>Use Do community partitioning on the static adjacency (connection) matrix, using any approach that works (maybe even do this using Pythons networkx). Networkx community partitioning algorithms like Louvain would expect your network to be un-directed. Networkx has a constructor for making an undirected network, from a numpy matrix input.
Issues here are making the network connection matrix (Hermitian) and or Symmetric. Julia has two packages (<a href=https://github.com/bicycle1885/Leiden.jl,>https://github.com/bicycle1885/Leiden.jl,</a> and METIS). Metis expects a matrix of Integers rather than float Real numbers between [0,1] as is common for synaptic weights.</p><p>Note these people have made progress on graph analysis of biological neural networks:
realneuralnetworks
<a href=https://github.com/jingpengw/realneuralnetworks-notebook/blob/main/34_connectivity_analysis/ju_connectivity_graph.ipynb>https://github.com/jingpengw/realneuralnetworks-notebook/blob/main/34_connectivity_analysis/ju_connectivity_graph.ipynb</a></p><p>Note these people (realneuralnetworks) have made progress on graph analysis of biological neural networks, it is unknown if their approach scales well. If it does give credit and re-purpose their methods.
<a href=https://github.com/jingpengw/realneuralnetworks-notebook/blob/main/34_connectivity_analysis/ju_connectivity_graph.ipynb>https://github.com/jingpengw/realneuralnetworks-notebook/blob/main/34_connectivity_analysis/ju_connectivity_graph.ipynb</a>
<a href=https://github.com/jingpengw/realneuralnetworks-notebook/blob/main/34_connectivity_analysis/ju_connection-psd.ipynb>https://github.com/jingpengw/realneuralnetworks-notebook/blob/main/34_connectivity_analysis/ju_connection-psd.ipynb</a></p><p>Julia Light Graphs also supports community partitioning. Issues I have experienced for light graphs partitioning are (1 running out of memory). and 2. Matrix is not symmetric and or Hermitian.</p><p>HPC (Gadi) may solve the memory issue.
<a href=https://docs.juliahub.com/LightGraphs/Xm08G/1.3.5/community/#LightGraphs.label_propagation-Union%7BTuple%7BAbstractGraph%7BT%7D%7D,%20Tuple%7BT%7D,%20Tuple%7BAbstractGraph%7BT%7D,Any%7D%7D%20where%20T>Julia Graph partitioning</a></p><h2 id=good-advanced-issues>Good Advanced Issues</h2><h1 id=1-1>1.</h1><p>Rat V1 Connectomes fromWrangle Rat V1 Connectomes from Sonata HDF5/Python to Julia <a href=https://github.com/russelljjarvis/getConnectomes>here </a>(Sonata/HDF5) to Julia JLD2 (also HDF5).</p><p>This is partially done. See for example here:
<a href=https://github.com/russelljjarvis/TrainSpikingNet.jl/blob/master/src/fast_connection_matrices.jl#L1_L67>https://github.com/russelljjarvis/TrainSpikingNet.jl/blob/master/src/fast_connection_matrices.jl#L1_L67</a></p><p>However, it would be good to compare this against the PyGeNN connectome (which uses different indexing). Also, I have only done this for a partition of this enormous connectome. See discussion here: <a href=https://github.com/russelljjarvis/TrainSpikingNet.jl/discussions/5#discussioncomment-4112622>https://github.com/russelljjarvis/TrainSpikingNet.jl/discussions/5#discussioncomment-4112622</a></p><h1 id=2-1>2.</h1><p>Make dynamic time-varying simulations by applying Ben Arthur&rsquo;s Spiking Neural Network code, to large-scale spiking neural networks.</p><p><a href=https://github.com/SpikingNetwork/TrainSpikingNet.jl>https://github.com/SpikingNetwork/TrainSpikingNet.jl</a>
One big issue here is that connection matrix-building methods are read in from a sequence of files that defines all the parameters of a simulation. Finally, a plethora of different connection matrix variables is embedded in a Julia static struct. The dimensionality of these matrices needs to be compatible with input stimulus dimensions. Compared to Python, plugging in new connection matrices is delicate and some care and understanding of Julia structs is required. See discussion here: <a href=https://github.com/russelljjarvis/TrainSpikingNet.jl/discussions/5#discussioncomment-4112622>https://github.com/russelljjarvis/TrainSpikingNet.jl/discussions/5#discussioncomment-4112622</a></p><p>Can we simply use <a href=https://github.com/rafaqz/Mixers.jl>https://github.com/rafaqz/Mixers.jl</a> to make a copy of the original struct and add in replacement matrices to a the cloned struct instance?</p><p>Another issue is wrangling the Sonata defined artificial synaptic inputs to make them compatible with TrainSpikingNet.jl</p><h1 id=3>3.</h1><p>Silence the correlation-based spike time training parts of the simulation workflow, as we are not yet training a network, but instead are just simulating it. Decoupling this code may be tricky.</p><h1 id=4>4.</h1><p>Benchmark Ben Arthur&rsquo;s Julia code against PyGENN/CUDA, and ultimately Neuromorphic hardware applied to similarly wired connectome.</p><p><a href=https://github.com/russelljjarvis/v1_project>https://github.com/russelljjarvis/v1_project</a></p><h3 id=communication-channels>Communication channels</h3><p><a href=https://mattermost.brainhack.org/brainhack/channels/spikenetopt.jl>https://mattermost.brainhack.org/brainhack/channels/spikenetopt.jl</a></p><h3 id=skills>Skills</h3><ul><li>Julia</li><li>Python</li><li>GitHub</li></ul><h3 id=onboarding-documentation>Onboarding documentation</h3><p><a href=https://github.com/russelljjarvis/SpikeNetOpt.jl/blob/main/CONTRIBUTING.md>https://github.com/russelljjarvis/SpikeNetOpt.jl/blob/main/CONTRIBUTING.md</a></p><h3 id=what-will-participants-learn>What will participants learn?</h3><p>Julia</p><h3 id=data-to-use>Data to use</h3><ul><li>Allen Brain V1 connectome encoded in Sonata.</li></ul><p><a href=https://github.com/russelljjarvis/getConnectomes>https://github.com/russelljjarvis/getConnectomes</a></p><h3 id=number-of-collaborators>Number of collaborators</h3><p><code>>=1</code></p><h3 id=credit-to-collaborators>Credit to collaborators</h3><p>I used all-contributors last year, and I think that will keep working well :)</p><p>Also co-authorship is a possibility? The goal is to publish something.</p><p><a href=https://github.com/russelljjarvis/SpikeNetOpt.jl/pull/17>https://github.com/russelljjarvis/SpikeNetOpt.jl/pull/17</a></p><h3 id=image>Image</h3><p>Leave this text if you don&rsquo;t have an image yet. Pending</p><h3 id=type>Type</h3><p>coding_methods, method_development, visualization</p><h3 id=development-status>Development status</h3><p>0_concept_no_content</p><h3 id=topic>Topic</h3><p>connectome, data_visualisation, physiology, reproducible_scientific_methods</p><h3 id=tools>Tools</h3><p>other</p><h3 id=programming-language>Programming language</h3><p>Julia, Python, CUDA.</p><h3 id=modalities>Modalities</h3><p>other</p><h3 id=git-skills>Git skills</h3><p>0_no_git_skills, 1_commit_push, 2_branches_PRs, 3_continuous_integration, 4_not_applicable</p><h3 id=things-to-do-after-the-project-is-submitted-and-ready-to-review>Things to do after the project is submitted and ready to review.</h3><ul><li><input checked disabled type=checkbox> Add a comment below the main post of your issue saying: <code>Hi @brainhackorg/project-monitors my project is ready!</code></li><li><input checked disabled type=checkbox> Twitter-sized summary of your project pitch.</li></ul><br><div class=row><div class=col-md-1></div><div class=col-md-10><div class=row><div class="col-12 col-md-3 pub-row-heading">Date</div><div class="col-12 col-md-9">Jan 1, 0001 12:00 AM</div></div></div><div class=col-md-1></div></div><div class="d-md-none space-below"></div><div class=space-below></div><div class=article-style></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/latex.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin=anonymous></script><script>const code_highlighting=true;</script><script src=/global2023/js/wowchemy.min.527a35f71480111dc6c4e2f1ec055fdb.js></script><div class=container><footer class=site-footer><p class=powered-by>Â© Brainhack Global 2023</p><p style=width:80%;padding-left:10%>Images (and their credits) provided by <a href=https://ohbm-brainart.github.io/ target=_blank>the brain art special interest group</a>
of the <a href=https://www.humanbrainmapping.org target=_blank>organization for human brain mapping</a>
can be viewed on <a href=TODO>our gallery page</a>.</p><p class=powered-by>Adapted from the <a href=https://wowchemy.com target=_blank rel=noopener>Wowchemy</a> template.
<span class=float-right aria-hidden=true><a href=# class=back-to-top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i>Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i>Download</a><div id=modal-error></div></div></div></div></div></body></html>